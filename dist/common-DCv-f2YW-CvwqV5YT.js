"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("./editor-BIsn6_l5.js");a.languageMap.abap={comments:{line:'"'}};const wa=(n,l,g=0)=>{const i=n.scrollContainer.style,m=document.documentElement.style;i.scrollPaddingBlock=m.scrollPaddingBlock=`${g}px ${a.isChrome&&!l.textContent?l.offsetHeight:0}px`,l.scrollIntoView({block:"nearest"}),i.scrollPaddingBlock=m.scrollPaddingBlock=""},na=(n,l)=>l?n.lastIndexOf(`
`,l-1)+1:0,ca=(n,l)=>(l=n.indexOf(`
`,l))+1?l:n.length,Ca=(n,l,g)=>(n.addListener(l,g),()=>n.removeListener(l,g));let Z;const Y=n=>n.replace(/[$+?|.^*()[\]{}\\]/g,"\\$&"),_=(n,l)=>n.slice(na(n,l),l),V=(n,l,g=l)=>[n.slice(l=na(n,l),g=ca(n,g)).split(`
`),l,g],U=(n,l,g=0,i=g,m=n.getSelection()[0])=>{var x;const f=n.value,b=n.wrapper.children[a.numLines(f,0,m)],T=document.createTreeWalker(b,5);let h=T.lastChild(),r=ca(f,m)+1-m-h.length;for(;-r<=i&&(h=T.previousNode());)if(!h.lastChild&&(r-=h.length||0,r<=g)){for(;h!=b;h=h.parentNode)if((x=h.matches)!=null&&x.call(h,l))return h}},ga=(n,l)=>{var g;return((g=U(n,'[class*="language-"]',0,0,l))==null?void 0:g.className.match(/language-(\S*)/)[1])||n.options.language},B=(n,l,g,i,m,f)=>{if(n.options.readOnly)return;Z=n.getSelection(),i??(i=g);let b=n.textarea,T=n.value,h=a.isChrome&&!T[i??Z[1]]&&/\n$/.test(l)&&/^$|\n$/.test(T),r;n.focused||b.focus(),g!=null&&b.setSelectionRange(g,i),m!=null&&(r=Ca(n,"update",()=>{b.setSelectionRange(m,f??m,Z[2]),r()})),a.isWebKit||b.dispatchEvent(new InputEvent("beforeinput",{data:l})),a.isChrome||a.isWebKit?(h&&(b.selectionEnd--,l=l.slice(0,-1)),a.isWebKit&&(l+=`
`),document.execCommand(l?"insertHTML":"delete",!1,l.replace(/&/g,"&amp;").replace(/</g,"&lt;")),h&&b.selectionStart++):document.execCommand(l?"insertText":"delete",!1,l),Z=0},$=n=>n.altKey+n.ctrlKey*2+n.metaKey*4+n.shiftKey*8,q=/[([{][^)\]}]*$|^[^.]*\b(?:case .+?|default):\s*$/,Ta=/\[]|\(\)|{}/,D=/<(?![?!\d#@])([^\s/=>$<%]+)(?:\s(?:\s*[^\s/"'=>]+(?:\s*=\s*(?!\s)(?:"[^"]*"|'[^']*'|[^\s"'=>]+(?=[\s>]))?|(?=[\s/>])))+)?\s*>[ 	]*$/,ha=/^<\/(?!\d)[^\s/=>$<%]+\s*>/,da=/[([{][^)\]}]*$/,pa=([n,l],g)=>Ta.test(g[n-1]+g[l]),S={line:"//",block:["/*","*/"]},P=/^(?:area|base|w?br|col|embed|hr|img|input|link|meta|source|track)$/i,ra=(n,l)=>!!n&&!(l!=null&&l.test(n[1])),oa=(n,l)=>[([g],i)=>ra(i.slice(0,g).match(n),l)||da.test(_(i,g)),(g,i)=>pa(g,i)||ra(i.slice(0,g[0]).match(n),l)&&ha.test(i.slice(g[1]))],aa={block:["<!--","-->"]},R=(n=aa,l=D,g)=>({comments:n,autoIndent:oa(l,g),autoCloseTags:([i,m],f,b)=>la(b,i,m,f,l,g)}),la=(n,l,g,i,m,f)=>{if(l==g){let b=m.exec(i.slice(0,l)+">"),T=n.extensions.matchTags;if(b&&(b=b[1]||"",!(f!=null&&f.test(b)))){if(T){let{pairs:h,tags:r}=T;for(let x=r.length;x;){let d=r[--x];if(d[1]>=l&&d[4]&&d[5]&&d[3]==b&&h[x]==null)return}}return`</${b}>`}}},e=(n=S,l=da)=>({comments:n,autoIndent:[([g],i)=>l.test(_(i,g)),pa]}),H=(n,l)=>a.languageMap[n]={comments:l,autoIndent:oa(ha,P),autoCloseTags:([g,i],m,f)=>U(f,"."+n,0,0,g)?"":la(f,g,i,m,D,P)};a.languageMap.abnf=e({line:";"});a.languageMap.actionscript=R(S);a.languageMap.ada=e({line:"--"});a.languageMap.agda={comments:{line:"--"}};a.languageMap.al=e();a.languageMap.g4=a.languageMap.antlr4=e();a.languageMap.apacheconf={comments:{line:"#"},autoIndent:[([n],l)=>/<\w+\b.*>[ 	]*$/.test(_(l,n)),([n,l],g)=>/<\w+\b.*>$/.test(_(g,n))&&/^<\/\w+\b.*>/.test(g.slice(l))],autoCloseTags([n],l){let g=/<(\w+)\b.*>/.exec(_(l,n)+">");return g&&`</${g[1]}>`}};a.languageMap.apex=e();a.languageMap.apl=e({line:"‚çù"});a.languageMap.applescript={comments:{line:"--",block:["(*","*)"]}};a.languageMap.aql=e();a.languageMap.ino=a.languageMap.arduino=e(S,q);a.languageMap.arff={comments:{line:"%"}};a.languageMap.art=a.languageMap.arturo={comments:{line:";"}};a.languageMap.adoc=a.languageMap.asciidoc={comments:{line:"//"}};a.languageMap["arm-asm"]=a.languageMap.armasm=a.languageMap.asm6502=a.languageMap.asmatmel=a.languageMap.nasm={comments:{line:";"}};a.languageMap.aspnet=R({block:["<%--","--%>"]},D,P);a.languageMap.autohotkey=e({line:";",block:["/*","*/"]});a.languageMap.autoit={comments:{line:";",block:["#cs","#ce"]}};a.languageMap.avs=a.languageMap.avisynth=e({line:"#",block:["/*","*/"]});a.languageMap.avdl=a.languageMap["avro-idl"]=e();a.languageMap.awk=e({line:"#"});a.languageMap.sh=a.languageMap.shell=a.languageMap.bash=e({line:"#"});a.languageMap.basic={comments:{line:"!"}};a.languageMap.batch={comments:{line:"::"}};a.languageMap.bbj={comments:{line:"REM"}};a.languageMap.bicep=e();a.languageMap.birb=e(S,q);a.languageMap.bison=e(S,q);a.languageMap.bqn=e({line:"#"});a.languageMap.brightscript={comments:{line:"'"}};a.languageMap.bro=e({line:"#"});a.languageMap.bsl=e({line:"//"});a.languageMap.cfscript=e();a.languageMap.chaiscript=e();a.languageMap.cil=e({line:"//"});a.languageMap["cilk-c"]=a.languageMap.cilkc=a.languageMap.cilk=a.languageMap["cilk-cpp"]=a.languageMap.cilkcpp=e(S,q);a.languageMap.clike=a.languageMap.js=a.languageMap.javascript=a.languageMap.ts=a.languageMap.typescript=a.languageMap.java=a.languageMap.cs=a.languageMap.csharp=a.languageMap.c=a.languageMap.cpp=a.languageMap.go=a.languageMap.d=a.languageMap.dart=a.languageMap.flow=a.languageMap.haxe=e(S,q);a.languageMap.clojure=e({line:";"});a.languageMap.cmake=e({line:"#",block:["#[[","]]"]});a.languageMap.cobol={comments:{line:"*"}};a.languageMap.coffee=a.languageMap.coffeescript=e({line:"#",block:["###","###"]});a.languageMap.conc=a.languageMap.concurnas=e();a.languageMap.cooklang={comments:{line:"--",block:["[-","-]"]}};a.languageMap.coq=e({block:["(*","*)"]});a.languageMap.razor=a.languageMap.cshtml=R({block:["@*","*@"]},D,P);a.languageMap.css=e({block:["/*","*/"]});a.languageMap.less=a.languageMap.scss=e();a.languageMap.sass={comments:S};a.languageMap.cue=e({line:"//"});a.languageMap.cypher=e({line:"//"});a.languageMap.dataweave=e();a.languageMap.dax=e();a.languageMap.dhall=e({line:"--",block:["{-","-}"]});a.languageMap.jinja2=H("django",{block:["{#","#}"]});a.languageMap["dns-zone"]=a.languageMap["dns-zone-file"]={comments:{line:";"}};a.languageMap.dockerfile=a.languageMap.docker={comments:{line:"#"}};a.languageMap.gv=a.languageMap.dot=e();a.languageMap.ebnf=e({block:["(*","*)"]});a.languageMap.editorconfig={comments:{line:"#"}};a.languageMap.eiffel=e({line:"--"});a.languageMap.ejs=R({block:["<%#","%>"]},D,P);a.languageMap.elixir={comments:{line:"#"}};a.languageMap.elm={comments:{line:"--",block:["{-","-}"]}};a.languageMap.markup=a.languageMap.html=a.languageMap.markdown=a.languageMap.md=R(aa,D,P);a.languageMap.erb=a.languageMap.html;a.languageMap.erlang={comments:{line:"%"}};a.languageMap.etlua=a.languageMap.html;a.languageMap.xlsx=a.languageMap.xls=a.languageMap["excel-formula"]=e({block:['N("','")']});a.languageMap.factor=e({line:"!",block:["/*","*/"]});a.languageMap.false={comments:{block:["{","}"]}};a.languageMap["firestore-security-rules"]=e({line:"//"});a.languageMap.fortran={comments:{line:"!"}};a.languageMap.fsharp=e({line:"//",block:["(*","*)"]});H("ftl",{block:["<#--","-->"]});a.languageMap.gap={comments:{line:"#"}};a.languageMap.gcode={comments:{line:";"}};a.languageMap.gdscript=e({line:"#"});a.languageMap.gettext={comments:{line:"#"}};a.languageMap.gherkin={comments:{line:"#"}};a.languageMap.git={comments:{line:"#"}};a.languageMap.glsl=a.languageMap.hlsl=e(S,q);a.languageMap.gamemakerlanguage=a.languageMap.gml=e(S,q);a.languageMap.gni=a.languageMap.gn=e({line:"#"});a.languageMap["go-mod"]=a.languageMap["go-module"]=e({line:"//"});a.languageMap.gradle=e();a.languageMap.graphql=e({line:"#"});a.languageMap.groovy=e();a.languageMap.haml=e({line:"-#"});a.languageMap.mustache=a.languageMap.hbs=H("handlebars",{block:["{{!","}}"]});a.languageMap.idr=a.languageMap.idris=a.languageMap.hs=a.languageMap.haskell=a.languageMap.purs=a.languageMap.purescript=e({line:"--",block:["{-","-}"]});a.languageMap.hcl=e({line:"#",block:["/*","*/"]});a.languageMap.hoon={comments:{line:"::"}};a.languageMap.ichigojam=e({line:"'"});a.languageMap.icon=e({line:"#"});a.languageMap.iecst=e({line:"//",block:["(*","*)"]});a.languageMap.npmignore=a.languageMap.hgignore=a.languageMap.gitignore=a.languageMap.ignore={comments:{line:"#"}};a.languageMap.inform7=e({block:["[","]"]});a.languageMap.ini={comments:{line:";"}};a.languageMap.io=e();a.languageMap.j={comments:{line:"NB."}};a.languageMap.jolie=e();a.languageMap.jq=e({line:"#"});a.languageMap.json=a.languageMap.json5=a.languageMap.jsonp=e();var ba=(n,l)=>n.replace(/<(\d+)>/g,(g,i)=>`(?:${l[+i]})`),La=(n,l,g)=>RegExp(ba(n,l),g),ka="\\s|//.*(?!.)|/\\*(?:[^*]|\\*(?!/))*\\*/",xa="\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})*\\}",ja=ba("\\{<0>*\\.{3}(?:[^{}]|<1>)*\\}",[ka,xa]);const ta=La(`(?:^|[^$\\w])<(?:(?!\\d)([^\\s/=><%]+)(?:<0>(?:<0>*(?:[^\\s"'{=<>/*]+(?:<0>*=<0>*(?!\\s)(?:"[^"]*"|'[^']*'|<1>)?|(?=[\\s/>]))|<2>))+)?<0>*)?>[ 	]*$`,[ka,xa,ja]),Sa=/^<\/(?!\d)[^\s/=><%]*\s*>/,Ia=({tags:n,pairs:l},{brackets:g,pairs:i},m)=>{var f,b;for(let T=n.length,h,r=0;h=n[--T];)if(h[2]>m&&h[1]<m)r=h[1];else if(!h[4]&&h[5]&&h[1]>=r&&h[2]<=m&&!(((f=n[l[T]])==null?void 0:f[1])<m)){for(let x=g.length,d;d=g[--x];)if(d[1]>=h[2]&&d[1]<m&&d[3]=="{"&&!(((b=g[i[x]])==null?void 0:b[1])<m))return;return!0}},Ea={block:["{/*","*/}"]};a.languageMap.jsx=a.languageMap.tsx={comments:S,getComments(n,l){const{matchBrackets:g,matchTags:i}=n.extensions;return(g&&i?Ia(i,g,l):U(n,".plain-text",0,0,l))?Ea:S},autoIndent:[([n],l)=>ta.test(l.slice(0,n))||q.test(_(l,n)),(n,l)=>pa(n,l)||ta.test(l.slice(0,n[0]))&&Sa.test(l.slice(n[1]))],autoCloseTags:([n,l],g,i)=>la(i,n,l,g,ta)};a.languageMap.julia=e({line:"#",block:["#=","=#"]});a.languageMap.keepalived=e({line:"#"});a.languageMap.keyman={comments:{line:"c"}};a.languageMap.kts=a.languageMap.kt=a.languageMap.kotlin=e();a.languageMap.kumir=e({line:"|"});a.languageMap.kusto=e({line:"//"});a.languageMap.context=a.languageMap.tex=a.languageMap.latex=e({line:"%"});H("latte",{block:["{*","*}"]});a.languageMap.ly=a.languageMap.lilypond=e({line:"%",block:["%{","%}"]});a.languageMap.ld=a.languageMap["linker-script"]=e({block:["/*","*/"]});H("liquid",{block:["{% comment %}","{% endcomment %}"]});a.languageMap["emacs-lisp"]=a.languageMap.emacs=a.languageMap.elisp=a.languageMap.lisp=e({line:";"});a.languageMap.livescript=e({line:"#",block:["/*","*/"]});a.languageMap.llvm=e({line:";"});a.languageMap.lolcode={comments:{line:"BTW",block:["OBTW","TLDR"]}};a.languageMap.lua=e({line:"--",block:["--[[","]]"]});a.languageMap.magma=e();a.languageMap.makefile={comments:{line:"#"}};a.languageMap.mata=e();a.languageMap.matlab=e({line:"%",block:["%{","}%"]});a.languageMap.maxscript=e({line:"--",block:["/*","*/"]});a.languageMap.mel=e(S,q);a.languageMap.mermaid=e({line:"%%"});a.languageMap.metafont=e({line:"%"});a.languageMap.mizar=e({line:"::"});a.languageMap.mongodb=e(S,q);a.languageMap.monkey=e({line:"'"});a.languageMap.moon=a.languageMap.moonscript=e({line:"--"});a.languageMap.n1ql=e({line:"--",block:["/*","*/"]});a.languageMap.n4jsd=a.languageMap.n4js=e(S,q);a.languageMap["nand2tetris-hdl"]=e();a.languageMap.nani=a.languageMap.naniscript=e({line:";"});a.languageMap.neon=e({line:"#"});a.languageMap.nevod=e();a.languageMap.nginx=e({line:"#"});a.languageMap.nim=e({line:"#"});a.languageMap.nix=e({line:"#",block:["/*","*/"]});a.languageMap.nsis=e({line:"#",block:["/*","*/"]});a.languageMap.objc=a.languageMap.objectivec=e(S,q);a.languageMap.ocaml=e({block:["(*","*)"]});a.languageMap.odin=e();a.languageMap.opencl=e(S,q);a.languageMap.qasm=a.languageMap.openqasm=e();a.languageMap.oz=e({line:"%",block:["/*","*/"]});a.languageMap.parigp=e({line:"\\\\",block:["/*","*/"]});a.languageMap.parser=R({line:"#",block:["<!--","-->"]},D,P);a.languageMap.pascaligo=a.languageMap.objectpascal=a.languageMap.pascal=e({line:"//",block:["(*","*)"]});a.languageMap.pcode=a.languageMap.peoplecode={comments:{block:["/*","*/"]}};a.languageMap.perl=e({line:"#"});a.languageMap.php={comments:S,getComments:(n,l)=>U(n,".php",0,0,l)?S:aa,autoIndent:oa(D,P),autoCloseTags:([n,l],g,i)=>!g.includes("<?")||U(i,".php",0,0,n)?"":la(i,n,l,g,D,P)};a.languageMap.plantuml=a.languageMap["plant-uml"]=e({line:"'",block:["/'","'/"]});a.languageMap.mscript=a.languageMap.pq=a.languageMap.powerquery=e();a.languageMap.powershell=e({line:"#",block:["<#","#>"]});a.languageMap.processing=e();a.languageMap.prolog=e({line:"%",block:["/*","*/"]});a.languageMap.promql=e({line:"#"});a.languageMap.properties={comments:{line:"#"}};a.languageMap.protobuf=e();a.languageMap.psl=e({line:"#"});a.languageMap.pug=e({line:"//-"});a.languageMap.puppet=e({line:"#",block:["/*","*/"]});a.languageMap.pure=e();a.languageMap.pbfasm=a.languageMap.purebasic=e({line:";"});a.languageMap.rpy=a.languageMap.renpy=a.languageMap.py=a.languageMap.python=e({line:"#"},/[([{][^)\]}]*$|:\s*$/);a.languageMap.q=e({line:"/"});a.languageMap.qml=e();a.languageMap.qore=e();a.languageMap.qs=a.languageMap.qsharp=e({line:"//"});a.languageMap.r=e({line:"#"});a.languageMap.reason=e();a.languageMap.rego=e({line:"#"});a.languageMap.res=a.languageMap.rescript=e();a.languageMap.rest={comments:{line:".."}};a.languageMap.rip=e({line:"#"});a.languageMap.roboconf=e({line:"#"});a.languageMap.robot=a.languageMap.robotframework={comments:{line:"#"}};a.languageMap.crystal=a.languageMap.rb=a.languageMap.ruby=e({line:"#",block:["=begin","=end"]});a.languageMap.rust=e();a.languageMap.sas=e({block:["/*","*/"]});a.languageMap.scala=e();a.languageMap.racket=a.languageMap.scheme=e({line:";",block:["#|","|#"]});a.languageMap.smali={comments:{line:"#"}};a.languageMap.smalltalk=e({block:['"','"']});H("smarty",{block:["{*","*}"]});a.languageMap.smlnj=a.languageMap.sml=e({block:["(*","*)"]});a.languageMap.sol=a.languageMap.solidity=e(S,q);a.languageMap.sln=a.languageMap["solution-file"]={comments:{line:"#"}};H("soy",S);a.languageMap["splunk-spl"]=e({block:['`comment("','")`']});a.languageMap.sqf=e();a.languageMap.plsql=a.languageMap.sql=e({line:"--",block:["/*","*/"]});a.languageMap.squirrel=e(S,q);a.languageMap.stan=e();a.languageMap.stata=e();a.languageMap.stylus=e();a.languageMap.sclang=a.languageMap.supercollider=e();a.languageMap.swift=e();a.languageMap.systemd={comments:{line:"#"}};a.languageMap.tcl=e({line:"#"});a.languageMap.textile=R(aa,D,P);a.languageMap.toml=e({line:"#"});a.languageMap.trickle=a.languageMap.troy=a.languageMap.tremor={comments:{line:"#"}};H("tt2",{block:["[%#","%]"]}).getComments=(n,l)=>({line:U(n,".tt2",0,0,l)&&"#",block:["[%#","%]"]});a.languageMap.rq=a.languageMap.sparql=a.languageMap.trig=a.languageMap.turtle=e({line:"#"});H("twig",{block:["{#","#}"]});a.languageMap.tsconfig=a.languageMap.typoscript=e();a.languageMap.uc=a.languageMap.uscript=a.languageMap.unrealscript=e(S,q);a.languageMap.uorazor={comments:{line:"#"}};a.languageMap.v=e();a.languageMap.vala=e(S,q);a.languageMap.vbnet={comments:{line:"'"}};a.languageMap.velocity=R({line:"##",block:["#*","*#"]},D,P);a.languageMap.verilog=e();a.languageMap.vhdl=e({line:"--"});a.languageMap.vim=e({line:'"'});a.languageMap.vba=a.languageMap.vb=a.languageMap["visual-basic"]=e({line:"'"});a.languageMap.warpscript=e();a.languageMap.wasm={comments:{line:";;",block:["(;",";)"]}};a.languageMap.webidl=a.languageMap["web-idl"]=e();a.languageMap.wgsl=e();a.languageMap.wiki=R({block:["/*","*/"]},D,P);a.languageMap.nb=a.languageMap.wl=a.languageMap.mathematica=a.languageMap.wolfram=e({block:["(*","*)"]});a.languageMap.wren=e();a.languageMap.xeoracube=a.languageMap.xeora=R(aa,D,P);a.languageMap.xml=a.languageMap.ssml=a.languageMap.atom=a.languageMap.rss=a.languageMap.mathml=a.languageMap.svg=R();a.languageMap.xojo={comments:{line:"//"}};const ya=["(:",":)"],qa=a.languageMap.xquery=R({block:ya},/<(?!!|\d)([^\s/=>$<%]+)(?:\s+[^\s/=>]+(?:\s*=\s*(["'])(?:\{\{|\{(?!\{)(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})*\}|(?!\2)[^{])*\2)?)*\s*>[ 	]*$/);qa.getComments=(n,l)=>({block:U(n,".plain-text",0,0,l)?["{(:",":)}"]:ya});a.languageMap.yml=a.languageMap.yaml=e({line:"#"});a.languageMap.yang=e();a.languageMap.zig=e({line:"//"});const Ba=(n=!0,l="([{",g=")]}")=>{let i;const m=r=>{r.extensions.matchBrackets=m,r.addListener("tokenize",T),n&&r.tokens[0]?r.update():T(r.tokens)},f=m.brackets=[],b=m.pairs=[],T=r=>{if(b.length=f.length=i=0,h(r,0,0),n)for(let x=0,d;d=f[x];){let C=d[0].alias;d[0].alias=(C?C+" ":"")+`bracket-${b[x++]==null?"error":"level-"+d[2]%12}`}},h=(r,x,d)=>{let C=[],w=0,t;for(let s=0;t=r[s++];){let p=t.length;if(typeof t!="string"){let o=t.content;if(Array.isArray(o))h(o,x,w+d);else if((t.alias||t.type)=="punctuation"){let c=Ma(o,l,p-1),M=c||Ma(o,g,p-1);if(M){if(f[i]=[t,x,0,o,!!c,x+p],c)C[w++]=[i,c];else for(let k=w;k;){let[u,v]=C[--k];M==v&&(b[b[i]=u]=i,f[i][2]=f[u][2]=k+d,w=k,k=0)}i++}}}x+=p}};return m},Ma=(n,l,g)=>l.indexOf(n[0])+1||g&&l.indexOf(n[g])+1,Da=()=>n=>{let l,g,i,m=-1,f=[],b=()=>{g||(g=n.extensions.matchBrackets);let[r,x]=n.getSelection(),d=r==x&&n.focused&&g&&T(x)||-1;if(d!=m){if(h(),d+1){let C=l[i[d]],w=l[d];f=[C,w].map(t=>U(n,".punctuation",0,-1,t[1])),f[0]!=f[1]&&C[1]+C[3].length==w[1]&&(f[0].textContent+=f[1].textContent,f[1].textContent="",f[1]=f[0]),h(!0)}else f=[];m=d}},T=r=>{var x;({brackets:l,pairs:i}=g);for(let d=0,C;C=l[++d];)if(!C[4]&&C[5]>=r&&((x=l[i[d]])==null?void 0:x[1])<=r)return d},h=r=>f.forEach(x=>x.classList.toggle("active-bracket",!!r));a.addTextareaListener(n,"focus",b),a.addTextareaListener(n,"blur",b),n.addListener("selectionChange",b),n.addListener("update",()=>{h(),m=-1})},Pa=a.createTemplate("<div class=guide-indents style=left:var(--padding-left);bottom:auto;right:auto> "),Ra=a.createTemplate("<div style=width:1px;position:absolute;background:var(--bg-guide-indent)>"),Aa=()=>{let n,l=0,g,i=-1,m;const f=[],b=[],T=Pa(),h=[],r=w=>{g=[];const t=d(w.split(`
`)),s=t.length;for(let p=0,o=[],c=t[0];c;p++){const M=(f[p]||(f[p]=Ra())).style,[k,u,v]=c,y=b[p];c=t[p+1],k!=(y==null?void 0:y[0])&&(M.top=k+"00%"),u!=(y==null?void 0:y[1])&&(M.height=u+"00%"),v!=(y==null?void 0:y[2])&&(M.left=v*100+"%");const j=o[0]!=k&&(c==null?void 0:c[0])!=k,L=o[0]+o[1]!=k+u&&(c==null?void 0:c[0])+(c==null?void 0:c[1])!=k+u;for(let I=-j,E=u+L;I<E;I++)g[I+k]=p;o=b[p]=t[p]}for(let p=l;p>s;)f[--p].remove();T.append(...f.slice(l,l=s))},x=()=>{const w=g[m.activeLineNumber-1]??-1;w!=i&&(i>-1&&(f[i].className=""),w>-1&&(f[w].className="active")),i=w},d=w=>{const t=w.length,s=[],p=[];for(let o=0,c=-1,M=0,k=0;;M++){const u=M==t,v=u?0:h[M]=C(w[M]);if(v<0)c<0&&(c=M);else{for(let y=v;y<o;y++)s[y][1]=(c<0||y==v&&!u?M:c)-s[y][0];for(let y=o;y<v;)p[k++]=s[y]=[c<0||y>o?M:c,0,y++*n];c=-1,o=v}if(u)break}return h.length=t,p},C=w=>{let t=w.search(/\S/),s=0;if(t<0)return t;for(let p=0;p<t;)s+=w[p++]=="	"?n-s%n:1;return Math.ceil(s/n)};return{lines:T.children,indentLevels:h,update(w,t){m||(m=w,w.extensions.indentGuides=this,w.overlays.append(T),w.addListener("update",r),w.addListener("selectionChange",x)),T.style.display=t.wordWrap?"none":"",n!=(n=t.tabSize||2)&&(r(w.value),x())}}},Na=a.createTemplate("<div style=position:absolute;top:0;opacity:0;padding:inherit> <span><span></span> "),Oa=()=>{let n,l=" ",g=" ";const i=Na(),[m,f]=i.childNodes,[b,T]=f.childNodes,h=d=>{let{value:C,activeLine:w}=n,t=d[d[2]<"f"?0:1],s=_(C,t),p=C.slice(t,ca(C,t));!s&&!p&&(p=" "),l!=s&&(m.data=l=s),g!=p&&(T.data=g=p),i.parentNode!=w&&w.prepend(i)},r=()=>wa(n,b),x=d=>{d.addListener("selectionChange",h),n=d,d.extensions.cursor=x,a.addTextareaListener(d,"input",C=>{/history/.test(C.inputType)&&r()}),d.activeLine&&h(d.getSelection())};return x.getPosition=()=>{const d=b.getBoundingClientRect(),C=n.overlays.getBoundingClientRect();return{top:d.y-C.y,bottom:C.bottom-d.bottom,left:d.x-C.x,right:C.right-d.x,height:d.height}},x.scrollIntoView=r,x.element=b,x};let sa=!1;const ma=navigator.clipboard,X=a.isMac?4:2,za=n=>sa=n,F=n=>n.search(/\S|$/),Wa=(n=['""',"''","``","()","[]","{}"],l=/([^$\w'"`]["'`]|.[[({])[.,:;\])}>\s]|.[[({]`/s)=>(g,i)=>{let m;const{keyCommandMap:f,inputCommandMap:b,getSelection:T}=g,h=({insertSpaces:t=!0,tabSize:s}=i)=>[t?" ":"	",t?s||2:1],r=()=>{var t;return!i.readOnly&&!((t=g.extensions.cursor)!=null&&t.scrollIntoView())},x=([t,s],[p,o],c,M)=>(t<s||!M&&l.test((c[s-1]||" ")+p+(c[s]||" ")))&&!B(g,p+c.slice(t,s)+o,null,null,t+1,s+1),d=([t,s],p,o)=>t==s&&o[s]==p&&!g.setSelection(t+1),C=(t,s,p,o,c,M)=>{let k=s.join(`
`);if(k!=t.join(`
`)){const u=t.length-1,v=s[u],y=t[u],j=y.length-v.length,L=s[0].length-t[0].length,I=p+F((L<0?s:t)[0]),E=o-y.length+F(j>0?v:y),W=p-o+k.length+j,J=I>c?c:Math.max(I,c+L),G=M+p-o+k.length;B(g,k,p,o,J,M<E?G+j:Math.max(E+W,G))}},w=(t,s,p,o,c,M,k,u)=>{C(s,s.map(t?v=>v.slice(F(v)?u-F(v)%u:0):v=>v&&k.repeat(u-F(v)%u)+v),p,o,c,M)};b["<"]=(t,s,p)=>x(s,"<>",p,!0),n.forEach(([t,s])=>{const p=t==s;b[t]=(o,c,M)=>(p&&d(c,s,M)||x(c,t+s,M))&&r(),p||(b[s]=(o,c,M)=>d(c,s,M)&&r())}),b[">"]=(t,s,p)=>{var c,M;const o=(M=(c=a.languageMap[ga(g)])==null?void 0:c.autoCloseTags)==null?void 0:M.call(c,s,p,g);o&&(B(g,">"+o,null,null,s[0]+1),a.preventDefault(t))},f.Tab=(t,[s,p],o)=>{if(sa||i.readOnly||$(t)&6)return;const[c,M]=h(i),k=t.shiftKey,[u,v,y]=V(o,s,p);return s<p||k?w(k,u,v,y,s,p,c,M):B(g,c.repeat(M-(s-v)%M)),r()},f.Enter=(t,s,p)=>{var c,M,k;const o=$(t)&7;if(!o||o==X){o&&(s[0]=s[1]=V(p,s[1])[2]);const[u,v]=h(),[y,j]=s,L=(c=a.languageMap[ga(g)])==null?void 0:c.autoIndent,I=Math.floor(F(_(p,y))/v)*v,E=(M=L==null?void 0:L[0])!=null&&M.call(L,s,p,g)?v:0,W=(k=L==null?void 0:L[1])==null?void 0:k.call(L,s,p,g),J=`
`+u.repeat(I+E)+(W?`
`+u.repeat(I):"");if(J[1]||p[j])return B(g,J,y,j,y+I+E+1),r()}},f.Backspace=(t,[s,p],o)=>{if(s==p){const c=_(o,s),M=i.tabSize||2,k=n.includes(o.slice(s-1,s+1)),u=/[^ ]/.test(c)?0:(c.length-1)%M+1;if(k||u>1)return B(g,"",s-(k?1:u),s+k),r()}};for(let t=0;t<2;t++)f[t?"ArrowDown":"ArrowUp"]=(s,[p,o],c)=>{const M=$(s);if((M&7)==1){if(M==1){const k=t?p:na(c,p)-1,u=t?c.indexOf(`
`,o)+1:o;if(k>-1&&u>0){const[v,y,j]=V(c,k,u),L=v[t?"pop":"shift"](),I=(L.length+1)*(t?1:-1);v[t?"unshift":"push"](L),B(g,v.join(`
`),y,j,p+I,o+I)}}else{const[k,u,v]=V(c,p,o),y=k.join(`
`),j=t?y.length+1:0;B(g,y+`
`+y,u,v,p+j,o+j)}return r()}};a.addTextareaListener(g,"keydown",t=>{var k;const s=$(t),p=t.keyCode,[o,c,M]=T();if(s==X&&(p==221||p==219))return w(p==219,...V(g.value,o,c),o,c,...h()),r();if(s==(a.isMac?10:2)&&p==77)za(!sa),a.preventDefault(t);else if(p==191&&s==X||p==65&&s==9){const u=g.value,v=s==9,y=v?o:na(u,o),j=a.languageMap[ga(g,y)]||{},{line:L,block:I}=((k=j.getComments)==null?void 0:k.call(j,g,y,u))||j.comments||{},[E,W,J]=V(u,o,c),G=E.length-1;if(v){if(I){const[A,K]=I,Q=u.slice(o,c),N=u.slice(0,o).search(Y(A)+" ?$"),O=RegExp("^ ?"+Y(K)).test(u.slice(c));N+1&&O?B(g,Q,N,c+ +(u[c]==" ")+K.length,N,N+c-o):B(g,`${A} ${Q} ${K}`,o,c,o+A.length+1,c+A.length+1),r()}}else if(L){const A=Y(L),K=RegExp(`^\\s*(${A} ?|$)`),Q=RegExp(A+" ?"),N=!/\S/.test(u.slice(W,J)),O=E.map(E.every(z=>K.test(z))&&!N?z=>z.replace(Q,""):z=>N||/\S/.test(z)?z.replace(/^\s*/,`$&${L} `):z);C(E,O,W,J,o,c),r()}else if(I){const[A,K]=I,Q=F(E[0]),N=E[0].startsWith(A,Q)&&E[G].endsWith(K),O=E.slice();O[0]=E[0].replace(N?RegExp(Y(A)+" ?"):/(?=\S)|$/,N?"":A+" ");let z=O[0].length-E[0].length;O[G]=N?O[G].replace(RegExp(`( ?${Y(K)})?$`),""):O[G]+" "+K;let ia=O.join(`
`),ea=Q+W,ua=ea>o?o:Math.max(o+z,ea),va=ea>c-(o!=c)?c:Math.min(Math.max(ea,c+z),W+ia.length);B(g,ia,W,J,ua,Math.max(ua,va)),r()}}else if(s==8+X&&p==75){const u=g.value,[v,y,j]=V(u,o,c),L=M=="forward"?c-j+v.pop().length:o-y,I=V(u,j+1)[0][0].length;return B(g,"",y-!!y,j+!y,y+Math.min(L,I)),r()}}),["copy","cut","paste"].forEach(t=>a.addTextareaListener(g,t,s=>{const[p,o]=T();if(p==o&&ma){const[[c],M,k]=V(g.value,p,o);t=="paste"?s.clipboardData.getData("text/plain")==m&&(B(g,m+`
`,M,M,p+m.length+1),r(),a.preventDefault(s)):(ma.writeText(m=c),t=="cut"&&(B(g,"",M,k+1),r()),a.preventDefault(s))}}))},Ka=(n=999)=>{let l=0,g,i,m=!1,f,b,T,h,r;const x=[],d=t=>{t>=n&&(t--,x.shift()),x.splice(l=t,n,[g.value,r(),r()])},C=t=>{var s;x[t]&&(h.value=x[t][0],h.setSelectionRange(...x[t][t<l?2:1]),g.update(),(s=g.extensions.cursor)==null||s.scrollIntoView(),l=t,i=!1)},w=(t,s)=>{t.extensions.history=w,g=t,r=t.getSelection,h||d(0),h=t.textarea,t.addListener("selectionChange",()=>{i=m,m=!1}),a.addTextareaListener(t,"beforeinput",p=>{let o=p.data,c=p.inputType;/history/.test(c)?(C(l+(c[7]=="U"?-1:1)),a.preventDefault(p)):(T=i&&f==c&&p.isTrusted&&!(o!=null&&o.includes(`
`))&&(o!=" "||b==o))||(x[l][2]=Z||r()),m=!0,b=o,f=c}),a.addTextareaListener(t,"input",()=>d(l+!T)),a.addTextareaListener(t,"keydown",p=>{if(!s.readOnly){const o=$(p),c=p.keyCode,M=o==X&&c==90,k=o==X+8&&c==90||!a.isMac&&o==X&&c==89;M?(C(l-1),a.preventDefault(p)):k&&(C(l+1),a.preventDefault(p))}})};return w.clear=()=>{d(0),i=!1},w.has=t=>l+t in x,w.go=t=>C(l+t),w},Va=a.createTemplate('<div style="color:#0000;contain:strict;padding:0 var(--_pse) 0 var(--padding-left)" aria-hidden=true>'),_a=a.createTemplate("<span> "),fa=(n,l,g=/[_\p{N}\p{L}]{2}/u)=>l?g.test(n.slice(l-(n.codePointAt(l-2)>65535?2:1),l+(n.codePointAt(l)>65535?2:1))):!1,Ha=n=>{const l=[new Text],g=[],i=Va(),m=[],f=()=>{m[0]&&(m.length=0,i.remove())};let b,T=0;return{search(h,r,x,d,C,w,t){if(!h)return f();d||(h=Y(h));const s=n.value,p=C?s.slice(...C):s,o=C?C[0]:0;let c,M,k,u=0;try{for(b=RegExp(h,`gum${r?"":"i"}`);c=b.exec(p);)M=c[0].length,k=c.index+o,M||(b.lastIndex+=s.codePointAt(k)>65535?2:1),!(x&&(fa(s,k,t)||fa(s,k+M,t)))&&(!w||w(k,k+M))&&(m[u++]=[k,k+M])}catch(v){return f(),v.message}if(u){for(m.length=u,M=Math.min(u*2,2e4),u=l.length;u<=M;)l[u++]=_a(),l[u++]=new Text;for(u=T-1;u>M;)l[u--].remove();T<=M&&i.append(...l.slice(T,M+1));let v=0;for(u=0;u<M;++u){const[y,j]=m[u/2],L=s.slice(v,y),I=s.slice(y,v=j);L!=g[u]&&(l[u].data=g[u]=L),I!=g[++u]&&(l[u].firstChild.data=g[u]=I)}l[M].data=g[M]=s.slice(v),i.parentNode||n.overlays.append(i),T=M+1}else f()},container:i,get regex(){return b},matches:m,stopSearch:f}},Ja=(n,l=1,g=200)=>{const i=m=>{const f=i.api=Ha(m),b=f.container;b.style.zIndex=-1,b.className="selection-matches",m.addListener("selectionChange",([T,h],r)=>{r=m.focused?r.slice(T,h):"",T+=r.search(/\S/),r=r.trim();let x=r.length;f.search(l>x||x>g?"":r,n,!1,!1,void 0,(d,C)=>d>T||C<=T)})};return i},Ua=(n=Ka())=>[Wa(),Aa(),Ba(),Da(),Oa(),Ja(),n,{update(l){l.value!=l.textarea.value&&n.clear()}}];exports.common=Ua;
